!function(win,doc,undefined){"use strict";win.vUnit=function(options){var vunit=this,opts=options||{};vunit.options={stylesheetId:opts.stylesheetId||"v-unit-stylesheet",viewportObserverInterval:opts.viewportObserverInterval||100,CSSMap:opts.CSSMap||null,onResize:opts.onResize||function(){}},vunit.viewportSize={height:0,width:0},vunit.init=function(){return!!opts.CSSMap&&win.setInterval(function viewportObserver(){if(viewportHasChanged()){var stylesheet=createStylesheet(),CSSRules=createCSSRules();appendCSSRulesToStylesheet(CSSRules,stylesheet),appendStylesheetOnHead(stylesheet),vunit.options.onResize(vunit.viewportSize)}return viewportObserver}(),vunit.options.viewportObserverInterval)};var viewportHasChanged=function(){var currentViewportSize=calculateViewportSize(),differentHeight=currentViewportSize.height!==vunit.viewportSize.height,differentWidth=currentViewportSize.width!==vunit.viewportSize.width;return vunit.viewportSize=currentViewportSize,differentHeight||differentWidth},createStylesheet=function(){var stylesheet=doc.createElement("style");return stylesheet.setAttribute("rel","stylesheet"),stylesheet.setAttribute("type","text/css"),stylesheet.setAttribute("media","screen"),stylesheet.setAttribute("id",vunit.options.stylesheetId),stylesheet},createCSSRules=function(){var computedHeight=vunit.viewportSize.height/100,computedWidth=vunit.viewportSize.width/100,vmin=Math.min(computedWidth,computedHeight),vmax=Math.max(computedWidth,computedHeight),map=vunit.options.CSSMap,CSSRules="",value=0;for(var selector in map)for(var property=map[selector].property,range=1;range<=100;range++){switch(map[selector].reference){case"vw":value=computedWidth*range;break;case"vh":value=computedHeight*range;break;case"vmin":value=vmin*range;break;case"vmax":value=vmax*range}var CSSRuleTemplate="_SELECTOR__RANGE_{_PROPERTY_:_VALUE_px}\n";CSSRules+=CSSRuleTemplate.replace("_SELECTOR_",selector).replace("_RANGE_",range).replace("_PROPERTY_",property).replace("_VALUE_",value)}return CSSRules},appendCSSRulesToStylesheet=function(CSSRules,stylesheet){stylesheet.styleSheet?stylesheet.styleSheet.cssText=CSSRules:stylesheet.appendChild(doc.createTextNode(CSSRules))},appendStylesheetOnHead=function(stylesheet){var head=doc.head||doc.getElementsByTagName("head")[0]||doc.documentElement,legacyStylesheet=doc.getElementById(vunit.options.stylesheetId);legacyStylesheet&&head.removeChild(legacyStylesheet),head.appendChild(stylesheet)},calculateViewportSize=function(){var viewportSize={height:doc.documentElement.clientHeight,width:doc.documentElement.clientWidth};return viewportSize}}}(window,document);